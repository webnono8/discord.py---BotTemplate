###################################################################################################################################################################################
###################################################################################################################################################################################
############################################################################  ready.py for Template  ##############################################################################
###################################################################################################################################################################################
###################################################################################################################################################################################


""" Importations """
from discord import *
from discord.ext import tasks

""" Code """
class ready_def:
    def ready(client, tree):

        @client.event
        async def on_ready():
            boucle.start()
            print(f'Le bot {client.user} est connect√© !')
            await tree.sync()

        @tasks.loop(seconds=1.0)
        async def boucle():
            ng = len(client.guilds)
            n_membres = 0            
            for i in range(ng):
                guild = client.guilds[i]
                n_membres += guild.member_count
            await client.change_presence(status=Status.do_not_disturb, activity=Activity(type=ActivityType.listening,name=f"{n_membres} membres"))